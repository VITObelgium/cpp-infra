CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
CMAKE_POLICY(VERSION 2.8)

PROJECT(gzstream)
INCLUDE(GNUInstallDirs)

FIND_PATH(ZLIB_INCLUDE_DIR
    zlib.h
)

IF (NOT ZLIB_INCLUDE_DIR)
    MESSAGE(FATAL_ERROR "Could not find zlib header")
ENDIF ()

INCLUDE_DIRECTORIES(SYSTEM ${CMAKE_CURRENT_SOURCE_DIR} ${ZLIB_INCLUDE_DIR})
ADD_LIBRARY(gzstream STATIC gzstream.h gzstream.C)

INSTALL(TARGETS gzstream
        RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})

INSTALL(FILES gzstream.h DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})