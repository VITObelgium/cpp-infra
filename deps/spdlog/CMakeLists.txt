SET(MAJOR 0)
SET(MINOR 11)
SET(REVISION 0)
SET(NAME spdlog)

IF(HOST MATCHES ".*-musl")
    SET (PATCH patch -p1 < ${CMAKE_CURRENT_SOURCE_DIR}/muslstrerror.patch)
ELSE ()
    SET (PATCH "")
ENDIF ()

EXTERNALPROJECT_ADD(${NAME}
    URL https://github.com/gabime/${NAME}/archive/v${MAJOR}.${MINOR}.${REVISION}.zip TIMEOUT 180
    INSTALL_DIR ${CMAKE_INSTALL_PREFIX}
    PATCH_COMMAND ${PATCH}
    CMAKE_ARGS -G ${CMAKE_GENERATOR}
               -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
               -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}
               -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
)