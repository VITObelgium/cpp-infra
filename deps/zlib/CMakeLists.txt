SET(MAJOR 1)
SET(MINOR 2)
SET(REVISION 8)
SET(NAME zlib)
SET(PACKAGE ${NAME}-${MAJOR}.${MINOR}.${REVISION})

IF (WIN32)
EXTERNALPROJECT_ADD(${NAME}
    URL http://zlib.net/${PACKAGE}.tar.gz TIMEOUT 30
    INSTALL_DIR ${CMAKE_BINARY_DIR}/local
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
               -DCMAKE_DEBUG_POSTFIX=_d
               -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
               -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}
)
ELSE ()
EXTERNALPROJECT_ADD(${NAME}
    URL http://zlib.net/${PACKAGE}.tar.gz TIMEOUT 30
    INSTALL_DIR ${CMAKE_BINARY_DIR}/local
    PATCH_COMMAND patch -p0 < ${CMAKE_CURRENT_SOURCE_DIR}/noshared.patch
    CMAKE_ARGS -DCMAKE_INSTALL_PREFIX=<INSTALL_DIR>
               ${POSTFIX_CONFIG}
               -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}
               -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}
)
ENDIF ()